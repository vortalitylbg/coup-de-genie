<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cérébro - Classement ELO</title>
    <!-- Styles globaux -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6310403411998518"
         crossorigin="anonymous"></script>
    <style>
        .leaderboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .leaderboard-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .leaderboard-title {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-purple), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .leaderboard-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        .player-rank-card {
            background: var(--bg-card);
            border: 2px solid var(--primary-purple);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--glow-purple);
        }

        .player-rank-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .player-rank-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .rank-badge {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 900;
            color: white;
        }

        .player-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }

        .player-stat {
            text-align: center;
        }

        .player-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .player-stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .leaderboard-table {
            background: var(--bg-card);
            border-radius: 1rem;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .leaderboard-row {
            display: grid;
            grid-template-columns: 80px 1fr 150px 120px 120px 120px;
            padding: 1rem 1.5rem;
            align-items: center;
            gap: 1rem;
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition-normal);
        }

        .leaderboard-row:hover {
            background: var(--bg-card-hover);
        }

        .leaderboard-row.header {
            background: var(--bg-navy);
            font-weight: 600;
            color: var(--text-secondary);
        }

        .leaderboard-row.current-player {
            background: rgba(124, 58, 237, 0.2);
            border: 2px solid var(--primary-purple);
        }

        .rank-cell {
            font-size: 1.2rem;
            font-weight: 700;
            text-align: center;
        }

        .rank-cell.top-1 {
            color: #ffd700;
        }

        .rank-cell.top-2 {
            color: #c0c0c0;
        }

        .rank-cell.top-3 {
            color: #cd7f32;
        }

        .player-name-cell {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .rank-badge-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .rank-badge-cell-icon {
            font-size: 1.2rem;
        }

        .rank-badge-cell-text {
            font-size: 0.95rem;
        }

        .elo-cell {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--accent-gold);
            text-align: center;
        }

        .stat-cell {
            text-align: center;
            color: var(--text-secondary);
        }

        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .back-button {
            margin-bottom: 2rem;
        }

        /* Annonce AdSense */
        .adsense-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 3rem auto;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.05), rgba(59, 130, 246, 0.05));
            border: 1px solid var(--border-color);
            border-radius: 1.5rem;
            backdrop-filter: blur(10px);
            max-width: fit-content;
        }

        .adsense-message {
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.6;
            max-width: 400px;
        }

        .adsense-message i {
            color: var(--primary-purple);
            margin-right: 0.5rem;
        }

        .adsense-container {
            display: flex;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .leaderboard-row {
                grid-template-columns: 60px 1fr 120px 100px;
                font-size: 0.9rem;
            }

            .stat-cell.mobile-hidden {
                display: none;
            }

            .rank-badge-cell-text {
                display: none;
            }

            .leaderboard-title {
                font-size: 2rem;
            }

            .player-rank-content {
                flex-direction: column;
                text-align: center;
            }

            .player-rank-info {
                flex-direction: column;
            }

            .adsense-section {
                margin: 2rem auto;
                padding: 1.5rem;
            }

            .adsense-message {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- Firebase CDN Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
    
    <!-- Firebase configuration and functions -->
    <script src="js/firebase.js"></script>
    <!-- Rank System -->
    <script src="js/rank-system.js"></script>

    <div class="container">
        <div class="leaderboard-container">
            <!-- Header -->
            <div class="back-button">
                <a href="index.html" class="btn btn-secondary">
                    <i class="fas fa-arrow-left btn-icon"></i>
                    <span class="btn-text">Retour</span>
                </a>
            </div>

            <div class="leaderboard-header">
                <h1 class="leaderboard-title">
                    <i class="fas fa-trophy"></i>
                    Classement ELO
                </h1>
                <p class="leaderboard-subtitle">Les meilleurs joueurs de Cérébro</p>
            </div>

            <!-- Carte du joueur actuel -->
            <div class="player-rank-card" id="playerRankCard" style="display: none;">
                <div class="player-rank-content">
                    <div class="player-rank-info">
                        <div class="rank-badge" id="playerRankBadge">#1</div>
                        <div>
                            <h3 style="margin-bottom: 0.25rem;" id="playerName">Votre nom</h3>
                            <p style="color: var(--text-secondary); font-size: 0.9rem;">Votre classement</p>
                        </div>
                    </div>
                    <div class="player-stats-grid">
                        <div class="player-stat">
                            <div class="player-stat-value" id="playerElo">1000</div>
                            <div class="player-stat-label">ELO</div>
                        </div>
                        <div class="player-stat">
                            <div class="player-stat-value" id="playerDuels">0</div>
                            <div class="player-stat-label">Duels</div>
                        </div>
                        <div class="player-stat">
                            <div class="player-stat-value" id="playerWins">0</div>
                            <div class="player-stat-label">Victoires</div>
                        </div>
                        <div class="player-stat">
                            <div class="player-stat-value" id="playerWinRate">0%</div>
                            <div class="player-stat-label">Taux de victoire</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading -->
            <div class="loading-spinner" id="loadingSpinner">
                <div class="spinner"></div>
            </div>

            <!-- Section Annonce -->
            <div class="adsense-section">
                <div class="adsense-message">
                    <i class="fas fa-lightbulb"></i>
                    Coup de génie est un projet passionnel gratuit. Pour maintenir le service de qualité, nous affichons des annonces discrètes. Merci de votre compréhension !
                </div>
                <div class="adsense-container">
                    <!-- Google AdSense Ad - Display (300x250) -->
                    <ins class="adsbygoogle"
                         style="display:inline-block;width:300px;height:250px"
                         data-ad-client="ca-pub-6310403411998518"
                         data-ad-slot="9410413781"
                         data-ad-format="auto"
                         data-full-width-responsive="false"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
            </div>

            <!-- Tableau de classement -->
            <div class="leaderboard-table" id="leaderboardTable" style="display: none;">
                <div class="leaderboard-row header">
                    <div class="rank-cell">Rang</div>
                    <div class="player-name-cell">Joueur</div>
                    <div class="rank-badge-cell">Compétitif</div>
                    <div class="elo-cell">ELO</div>
                    <div class="stat-cell mobile-hidden">Duels</div>
                    <div class="stat-cell mobile-hidden">Victoires</div>
                </div>
                <div id="leaderboardBody">
                    <!-- Les lignes seront générées dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="rules.html">Règles du Jeu</a>
                <span class="separator">•</span>
                <a href="about.html">À Propos</a>
                <span class="separator">•</span>
                <a href="contact.html">Contact</a>
                <span class="separator">•</span>
                <a href="privacy.html">Politique de confidentialité</a>
                <span class="separator">•</span>
                <a href="terms.html">CGU</a>
                <span class="separator">•</span>
                <a href="legal.html">Mentions légales</a>
            </div>
        </div>
        <p class="footer-copyright">© <span id="footerYear"></span> Coup de génie. Tous droits réservés.</p>
    </footer>

    <!-- Particules d'animation en arrière-plan -->
    <div class="particles" id="particles"></div>

    <!-- App Scripts -->
    <script src="js/app.js"></script>
    <script src="js/leaderboard.js"></script>
</body>
</html>